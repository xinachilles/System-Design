# pagination



---

![NewsFeed 如 何 实 现 0 pagination 、 L byS* 0 4 0 1 年 前 如 果 用 户 看 了 前 100 条 News Feed 里 的 信 息 之 后 还 在 继 续 刷 新 ， 需 要 查 看 第 101 ． 2 佣 条 fe 丽 应 该 如 何 实 现 ？ 是 不 是 不 管 push 还 是 p 模 型 ， 如 果 页 的 话 都 得 pu 目 前 的 想 法 是 ： 假 设 前 100 条 中 最 旱 的 timestamp 是 T ， 就 分 别 请 求 f 酬 ow 的 人 在 T 之 前 的 100 条 feed, 然 后 冉 进 行 合 并 ？ 如 果 恰 好 有 几 条 feed 的 times mp 一 样 该 如 何 处 理 ？ 4 个 回 复 东 邪 黄 药 用 问 ： 是 不 是 不 管 push 还 是 p 模 型 ， 如 果 页 的 话 都 得 pull ？ 2016 ． 09 ． 02 翩 页 是 用 户 主 动 澡 作 的 过 程 ， 所 以 肯 定 是 由 client 发 给 server, 肯 定 是 一 个 p 的 过 程 。 问 ： 假 设 前 100 条 中 最 早 的 times 怡 mp 是 T ， 就 分 别 请 求 f 。 № w 的 人 在 T 之 前 的 100 条 feed ， 然 后 冉 进 行 合 并 ？ 问 ： 如 果 恰 好 有 几 条 feed 的 timestamp 一 样 该 如 何 处 理 ？ 答 ： 首 先 不 会 有 帖 子 的 timestamp--- 样 ， timestamp 的 精 度 很 高 的 （ 微 秒 级 别 ） 通 堂 来 说 ， 翩 页 这 个 完 全 可 以 作 为 一 道 单 独 的 系 统 设 计 面 试 题 来 问 你 。 翩 页 并 不 是 简 单 的 1 ． 100, 101 ． 200 这 样 去 页 。 因 为 当 你 在 页 的 时 候 ， 你 的 news fe 丽 可 能 已 经 添 加 了 新 的 内 容 ， 这 个 时 候 你 冉 去 索 引 最 新 的 101 ． 200 可 能 和 你 的 1 ． 1 開 有 重 叠 了 。 通 堂 的 做 法 是 ， 拿 第 101 个 帖 子 的 timestamp 作 为 下 一 页 的 起 始 位 置 ， 也 就 是 说 ， 当 用 户 在 看 到 第 一 页 的 前 100 个 帖 子 的 时 候 ， 他 还 有 第 101 个 帖 子 的 timestampfä 息 （ 藏 在 你 看 不 到 的 地 方 ） ， 然 后 你 请 求 下 一 页 的 时 候 ， 会 帚 上 这 个 timestamp 的 信息， server 眯 会 去 数 据 库 里 请 求 > = timestamp 的 前 101 个 帖 子 ， 然 后 也 同 样 把 第 101 个 帖 子 作 为 下 一 页 的 timestamp- 这 个 方 法 比 直 接 第 100 个 帖 子 的 timestamp 好 的 地 方 是 ， 你 如 果 读 不 到 第 101 个 帖 子 ， 说 明 没 有 下 一 页 了 ， 如 果 你 刚 才 只 有 100 个 帖 子 的 话 ， 用 第 1 个 帖 子 的 times 怡 mp 的 坏 处 是 ， 你 会 有 一 次 空 。 留 蛤 你 一 个 思 考 题 ； 怎 么 实 现 往 上 页 （ 刷 朋 友 圈 ， 查 看 最 新 的 帖 子 ） ](../../media/Twitter-^M-Insgram-Twitter---News-Feed-pagination-image1.png)



![S 同 学 2016 ． 09 ． 03 谢 谢 东 邪 老 师 的 回 答 ： ） 关 于 思 考 题 ： 可 以 利 用 和 向 下 页 类 似 的 方 法 ， 用 当 前 第 一 条 feed 的 时 间 T 去 数 据 库 取 T 之 后 的 f ds 。 如 果 是 p 模 型 的 话 ， 去 所 有 f 酬 ow 的 人 的 fe 丽 list 去 取然 后 merge push 的 话 ， 去 直 接 去 q ue 里 面 取 时 间 大 于 T 的 好 了 J 同 学 2017 ． 03 ． 17 因 为 当 你 在 翻 页 的 时 候 ， 你 的 newsfeed 可 能 已 经 添 加 了 新 的 内 容 ， 这 个 时 候 你 再 去 索 引 最 新 的 101 ． 200 可 能 和 你 的 1 ． 100 就 有 重 叠 了 。 为 什 么 会 重 叠 呢 ？ 能 举 例 说 明 吗 ？ 思 考 题 可 以 Cache 前 面 已 经 取 到 的 页 面 。 (clientXCache ？ ） ](../../media/Twitter-^M-Insgram-Twitter---News-Feed-pagination-image2.png)




